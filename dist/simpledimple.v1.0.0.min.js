!function(a,b){"use strict";if("object"==typeof exports)module.exports=b(require("d3"),require("dimple"));else if("function"==typeof define&&define.amd)define(["d3","dimple"],function(c,d){return a.simpledimple=b(c,d),a.simpledimple});else if(a.d3)if(a.dimple)a.simpledimple=b(a.d3);else{if(!console||!console.warn)throw"simpledimple requires dimple to run.  Are you missing a reference to the dimple library?";console.warn("simpledimple requires dimple to run.  Are you missing a reference to the dimple library?")}else{if(!console||!console.warn)throw"simpledimple requires d3 to run.  Are you missing a reference to the d3 library?";console.warn("simpledimple requires d3 to run.  Are you missing a reference to the d3 library?")}}(this,function(a,b){"use strict";var c={version:"1.0.0",plot:{},aggregateMethod:{}};return c.chart=function(a,c,d){var e,f,g,h,i,j,k,l,m,n,o;if(this.svg=b.newSvg(a,c.width,c.height),this.chart=new b.chart(this.svg,d),e=c.bounds,e&&this.chart.setBounds(e.x,e.y,e.width,e.height),this.data=d,f=c.noFormats,null!==f&&void 0!==f&&(this.chart.noFormats=f),this.axes=[],c.axes&&c.axes.length)for(h=c.axes.length,g=0;g<h;g++)i=this.addAxis(c.axes[g]),this.axes.push(i);if(this.series=[],c.series&&c.series.length)for(h=c.series.length,g=0;g<h;g++)j=this.addSeries(c.series[g]),this.series.push(j);if(this.legends=[],c.legends&&c.legends.length)for(h=c.legends.length,g=0;g<h;g++)k=this.addLegend(c.legends[g]),this.legends.push(k);if(c.storyboard&&(this.storyboard=this.setStoryboard(c.storyboard)),void 0!==c.ease&&(this.chart.ease=c.ease),void 0!==c.staggerDraw&&(this.chart.staggerDraw=c.staggerDraw),void 0!==c.classes)for(h=c.classes.length,g=0;g<h;g++)l=c.classes[g],this.chart.assignClass(l.tag,l.css);if(void 0!==c.defaultColors){for(h=c.defaultColors.length,m=[],g=0;g<h;g++)n=c.defaultColors[g],m.push(new b.color(n.fill,n.stroke,n.opacity));this.chart.defaultColors=m}void 0!==c.customClassList&&(this.chart.customClassList=c.customClassList),o=c.margins,void 0!==o&&this.chart.setMargins(o.x,o.y,o.width,o.height),this.addAxis=function(a){var b,c,d,e,f,g=a.position||null,h=a.categoryFields||null,i=a.measure||null,j=a.timeField||null,k=a.inputFormat||null,l=a.outputFormat||null;if(b=function(a){var b;return!isNaN(a)&&(b=parseFloat(a),(0|b)===b)},b(g)&&(g=this.chart.axes[g]),c=j?this.chart.addTimeAxis(g,j,k,l):"c"===a.position&&a.colors?this.chart.addColorAxis(i,a.colors):this.chart.addAxis(g,h,i,null),void 0!==a.floatingBarWidth&&(c.floatingBarWidth=a.floatingBarWidth),void 0!==a.hidden&&(c.hidden=a.hidden),void 0!==a.showPercent&&(c.showPercent=a.showPercent),void 0!==a.colors&&(c.colors=a.colors),void 0!==a.overrideMin&&(c.overrideMin=a.overrideMin),void 0!==a.overrideMax&&(c.overrideMax=a.overrideMax),void 0!==a.showGridlines&&(c.showGridlines=a.showGridlines),void 0!==a.dateParseFormat&&(c.dateParseFormat=a.dateParseFormat),void 0!==a.tickFormat&&(c.tickFormat=a.tickFormat),void 0!==a.timePeriod&&(c.timePeriod=a.timePeriod),void 0!==a.timeInterval&&(c.timeInterval=a.timeInterval),void 0!==a.useLog&&(c.useLog=a.useLog),void 0!==a.logBase&&(c.logBase=a.logBase),void 0!==a.title&&(c.title=a.title),void 0!==a.clamp&&(c.clamp=a.clamp),void 0!==a.ticks&&(c.ticks=a.ticks),void 0!==a.fontSize&&(c.fontSize=a.fontSize),void 0!==a.fontFamily&&(c.fontFamily=a.fontFamily),void 0!==a.autoRotateLabel&&(c.floatingBarWidth=a.floatingBarWidth),void 0!==a.groupOrderRules)for(e=a.groupOrderRules.length,d=0;d<e;d++)f=a.groupOrderRules[d],c.addGroupOrderRule(f.ordering,f.desc);if(void 0!==a.orderRules)for(e=a.orderRules.length,d=0;d<e;d++)f=a.orderRules[d],c.addOrderRule(f.ordering,f.desc);return c},this.addLegend=function(a){var b,c,d,e,f;for(b=a.series,d=b?b.length:0,e=d?[]:null,c=0;c<d;c++)e.push(j[b[c]]);return f=this.chart.addLegend(a.x,a.y,a.width,a.height,a.horizontalAlign,e),void 0!==a.fontSize&&(f.fontSize=a.fontSize),void 0!==a.fontFamily&&(f.fontFamily=a.fontFamily),f},this.addSeries=function(a){var c,d,e,f,g,h,i,j,k=a.categoryFields||null,l={area:b.plot.area,bar:b.plot.bar,bubble:b.plot.bubble,line:b.plot.line,pie:b.plot.pie},m={avg:b.aggregateMethod.avg,count:b.aggregateMethod.count,max:b.aggregateMethod.max,min:b.aggregateMethod.min,sum:b.aggregateMethod.sum};if(a.axes&&a.axes.length)for(d=[],e=a.axes.length,f=0;f<e;f++)d.push(this.axes[a.axes[f]]);else d=null;if(c=this.chart.addSeries(k,l[a.plotFunction],d),void 0!==a.x&&(c.x=this.axes[a.x]),void 0!==a.y&&(c.y=this.axes[a.y]),void 0!==a.z&&(c.z=this.axes[a.z]),void 0!==a.c&&(c.c=this.axes[a.c]),void 0!==a.p&&(c.p=this.axes[a.p]),void 0!==a.plot&&(c.plot=l[a.plot]),void 0!==a.aggregate&&(c.aggregate=m[a.aggregate]),void 0!==a.stacked&&(c.stacked=a.stacked),void 0!==a.barGap&&(c.barGap=a.barGap),void 0!==a.clusterBarGap&&(c.clusterBarGap=a.clusterBarGap),void 0!==a.lineWeight&&(c.lineWeight=a.lineWeight),void 0!==a.lineMarkers&&(c.lineMarkers=a.lineMarkers),void 0!==a.afterDraw&&(c.afterDraw=new Function("shape","data",a.afterDraw)),void 0!==a.interpolation&&(c.interpolation=a.interpolation),void 0!==a.tooltipFontSize&&(c.tooltipFontSize=a.tooltipFontSize),void 0!==a.tooltipFontFamily&&(c.tooltipFontFamily=a.tooltipFontFamily),void 0!==a.radius&&(c.radius=a.radius),void 0!==a.orderRules)for(g=a.orderRules.length,f=0;f<g;f++)h=a.orderRules[f],c.addOrderRule(h.ordering,h.desc);if(void 0!==a.eventHandlers)for(i=a.eventHandlers.length,f=0;f<i;f++)j=a.eventHandlers[f],c.addEventHandler(j.event,new Function("e",j.handler));return c},this.draw=function(a,b){return this.chart.draw(a,b),this},this.setStoryboard=function(a){var b,c;return void 0!==a.onTick&&(b=new Function("e",a.onTick)),c=this.chart.setStoryboard(a.categoryFields,b),void 0!==a.autoplay&&(c.autoplay=a.autoplay),void 0!==a.frameDuration&&(c.frameDuration=a.frameDuration),void 0!==a.storyLabel&&(c.storyLabel=a.storyLabel),void 0!==a.fontSize&&(c.fontSize=a.fontSize),void 0!==a.fontFamily&&(c.fontFamily=a.fontFamily),c}},c});